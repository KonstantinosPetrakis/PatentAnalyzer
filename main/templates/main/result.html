{% extends "main/base.html" %}

{% block contentBig %}
    <style>
        table {
            overflow: auto;
            height: 5rem;
        }
        table thead {
            position: sticky;
            top: 0;
            z-index: 1;
            background-color: var(--bs-body-bg);
        }

        .map {
            width: 15rem;
        }
    </style>
    <h2 class="fs-3 text-center mt-2"> Query Result Page </h2>
    <p>
        You selected {{ patents_count }} out of {{ patent_total_count }} patents in {{ time_taken|floatformat:2}}s. 
    </p>
    Showing at most 50 results.
    <table class="table table-sm table-responsive">
        <thead>
            <tr>
                <th> Office </th>
                <th> Office Patent ID </th>
                <th> Type </th>
                <th> Application Filled Date </th>
                <th> Granted Date </th>
                <th> Title </th>
                <th> Abstract </th>
                <th> Claims count </th>
                <th> Figures count </th>
                <th> withdrawn </th>
                <th> CPC Groups </th>
                <th> PCT Published/Filed date </th>
                <th> PCT Granted </th>
                <th> Inventor names </th>
                <th> Inventor locations </th>
                <th> Assignee names </th>
                <th> Assignee locations </th>
            </tr>
        </thead>
        <tbody>
            {% for patent in patents|slice:":50" %}
                <tr>
                    <td> {{ patent.office }} </td>
                    <td> {{ patent.office_patent_id }} </td>
                    <td> {{ patent.type }} </td>
                    <td> {{ patent.application_filed_date }} </td>
                    <td> {{ patent.granted_date }} </td>
                    <td> {{ patent.title }} </td>
                    <td> {{ patent.abstract }} </td>
                    <td> {{ patent.claims_count }} </td>
                    <td> {{ patent.figures_count }} </td>
                    <td> {{ patent.withdrawn }} </td>
                    <td> {{ patent.cpc_groups_groups }} </td>
                    <td> {{ patent.pct_data_dates }} </td>
                    <td> {{ patent.pct_data_granted }} </td>
                    <td> {{ patent.inventor_names }} </td>
                    <td> <div class="point-map" data-circle="{{inventor_circle}}" data-points="{{patent.inventor_points}}"/> </td>
                    <td> {{ patent.assignee_names }} </td>
                    <td> <div class="point-map" data-circle="{{assignee_circle}}" data-points="{{patent.assignee_points}}"/> </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}